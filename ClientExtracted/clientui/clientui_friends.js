/*!
 * (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
 * 
 */
webpackJsonp([7],{0:function(e,t,i){e.exports=i("afSG")},"3v0/":function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return o});var n,a=i("TToO"),r=i("y986");!function(e){e[e.SignIn=0]="SignIn",e[e.Loading=1]="Loading",e[e.Loaded=2]="Loaded",e[e.FailRetry=3]="FailRetry"}(n||(n={}));var o=function(){function e(){this.m_eState=n.SignIn}return e.prototype.Init=function(){this.m_eState=n.SignIn},Object.defineProperty(e.prototype,"loadingState",{get:function(){return this.m_eState},enumerable:!0,configurable:!0}),e.prototype.SetLoadingState=function(e){this.m_eState=e},a.c([r.observable],e.prototype,"m_eState",void 0),e}()},ClTo:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("TToO"),a=i("GiK3"),r=(i.n(a),i("5Pz3")),o=i("KLxG"),s="c:\\buildslave\\steam_webpack_rel_client_win32\\build\\src\\clientui\\shared\\js\\ui\\titlebar.tsx",l=function(e){function t(t){var i=e.call(this,t)||this;return i.state={maximized:i.BIsMaximized()},i}return n.d(t,e),t.prototype.BIsMaximized=function(){var e=this.props.popup.screen.availWidth-this.props.popup.innerWidth,t=this.props.popup.screen.availHeight-this.props.popup.innerHeight;return 0===e&&0===t},t.prototype.componentDidMount=function(){this.props.popup.addEventListener("resize",this.UpdateMaximizeState)},t.prototype.componentWillUnmount=function(){this.props.popup.removeEventListener("resize",this.UpdateMaximizeState)},t.prototype.UpdateMaximizeState=function(){var e=this.BIsMaximized();e!=this.state.maximized&&this.setState({maximized:e})},t.prototype.render=function(){var e=this.props.popup,t=function(){e&&e.close()},i=function(){e.SteamClient.Window.ToggleMaximize()},n=function(){e.SteamClient.Window.Minimize()},o="title-area-icon";return this.state.maximized?o+=" restoreButton":o+=" maximizeButton",a.createElement("div",{className:"TitleBar title-area",__source:{fileName:s,lineNumber:45}},a.createElement("div",{className:"title-area-highlight",__source:{fileName:s,lineNumber:46}}),a.createElement("div",{className:"title-area-children",__source:{fileName:s,lineNumber:47}},this.props.children),!this.props.hideActions&&a.createElement("div",{className:"title-bar-actions",__source:{fileName:s,lineNumber:51}},a.createElement("div",{className:"title-area-icon closeButton",onClick:t,__source:{fileName:s,lineNumber:52}},a.createElement(r.k,{__source:{fileName:s,lineNumber:52}})),!this.props.hideMinMax&&a.createElement("div",{className:o,onClick:i,__source:{fileName:s,lineNumber:53}},this.state.maximized&&a.createElement(r.g,{__source:{fileName:s,lineNumber:55}}),!this.state.maximized&&a.createElement(r.e,{__source:{fileName:s,lineNumber:57}})),!this.props.hideMinMax&&a.createElement("div",{className:"title-area-icon minimizeButton",onClick:n,__source:{fileName:s,lineNumber:59}},a.createElement(r.f,{__source:{fileName:s,lineNumber:59}}))))},n.c([o.a],t.prototype,"UpdateMaximizeState",null),t}(a.Component)},KxOm:function(e,t,i){"use strict";function n(){return s.createElement("div",{__source:{fileName:v,lineNumber:99}},s.createElement("div",{__source:{fileName:v,lineNumber:100}},s.createElement(h.a,{className:"friendsThrobber",size:"large",string:Object(p.b)("#FriendsList_StillLoadingSummary"),position:"center",__source:{fileName:v,lineNumber:101}})),s.createElement("div",{className:"summaryText",__source:{fileName:v,lineNumber:103}}),s.createElement("div",{className:"detailText",__source:{fileName:v,lineNumber:105}},Object(p.b)("#FriendsList_StillLoadingDetail")))}function a(){var e=function(){console.log("OnRetryClick"),window.parent.postMessage({message:"ChatReloadRequest",state:void 0},"https://steamloopback.host")};return s.createElement("div",{__source:{fileName:v,lineNumber:118}},s.createElement("div",{className:"cautionIcon",__source:{fileName:v,lineNumber:119}},s.createElement(c.a,{__source:{fileName:v,lineNumber:120}})),s.createElement("div",{className:"summaryText",__source:{fileName:v,lineNumber:122}},Object(p.b)("#FriendsList_OfflineOrFailure")),s.createElement("div",{className:"detailText",__source:{fileName:v,lineNumber:125}},Object(p.b)("#FriendsList_OfflineDetail")),s.createElement("div",{className:"detailText",__source:{fileName:v,lineNumber:128}},Object(p.b)("#FriendsList_OfflineDetail")),s.createElement("div",{__source:{fileName:v,lineNumber:131}},s.createElement("button",{className:"retryButton",onClick:e,__source:{fileName:v,lineNumber:132}},Object(p.b)("#Friends_RetryLoading"))))}function r(){var e=function(){window.parent.postMessage({message:"SignInRequest",state:void 0},"https://steamloopback.host")};return s.createElement("div",{__source:{fileName:v,lineNumber:143}},s.createElement("div",{className:"summaryText",__source:{fileName:v,lineNumber:144}},Object(p.b)("#FriendsList_SignedOut")),s.createElement("div",{className:"detailText",__source:{fileName:v,lineNumber:147}},Object(p.b)("#FriendsList_SignedOut_Detail")),s.createElement("div",{__source:{fileName:v,lineNumber:150}},s.createElement("button",{className:"retryButton",onClick:e,__source:{fileName:v,lineNumber:151}},Object(p.b)("#Friends_SignIn"))))}i.d(t,"a",function(){return S});var o=i("TToO"),s=i("GiK3"),l=(i.n(s),i("O27J")),c=(i.n(l),i("5Pz3")),m=i("y986"),u=i("Mn8c"),d=i("z9An"),p=i("sVhq"),f=i("ccMP"),_=i("KLxG"),b=i("ClTo"),h=i("sgqT"),N=i("3v0/"),v="c:\\buildslave\\steam_webpack_rel_client_win32\\build\\src\\clientui\\ui\\src\\js\\components\\friends.tsx",g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.d(t,e),t.prototype.ContextMenu=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.componentDidMount=function(){var e=this;SteamClient.WebChat.GetLocalPersonaName().then(function(t){e.m_strPersonaName=t}),SteamClient.WebChat.GetLocalAvatarBase64().then(function(t){e.m_strAvatarSource=t})},t.prototype.render=function(){var e=this.props.offlineStore.loadingState,t=this.m_strPersonaName,i=this.m_strAvatarSource,o="currentUserAvatar";""==i&&(o+=" noAvatarImg");var l="chat_main fullheight responsive_friends friends_loading_error";return this.props.popup&&this.props.popup.focused&&(l+=" focused"),s.createElement("div",{className:l,onContextMenu:this.ContextMenu,__source:{fileName:v,lineNumber:46}},s.createElement("div",{className:"friendsListContainer fullheight",__source:{fileName:v,lineNumber:47}},s.createElement("div",{className:"friendlist",__source:{fileName:v,lineNumber:48}},s.createElement(b.a,{popup:this.props.popup.window,__source:{fileName:v,lineNumber:49}}),s.createElement("div",{className:"currentUserContainer",__source:{fileName:v,lineNumber:50}},s.createElement("div",{className:"AvatarAndUser",__source:{fileName:v,lineNumber:51}},""!=i&&s.createElement("img",{className:o,src:i,__source:{fileName:v,lineNumber:53}}),""==i&&s.createElement("div",{className:o,__source:{fileName:v,lineNumber:55}}),s.createElement("div",{className:"labelHolder",__source:{fileName:v,lineNumber:56}},s.createElement("div",{className:"statusAndName",__source:{fileName:v,lineNumber:57}},s.createElement("div",{className:"playerName",__source:{fileName:v,lineNumber:58}},t)),s.createElement("div",{className:"richPresenceContainer",__source:{fileName:v,lineNumber:60}},s.createElement("div",{className:"gameName richPresenceLabel",__source:{fileName:v,lineNumber:61}},Object(p.b)("#FriendsList_Offline_Disconnected")))))),s.createElement("div",{className:"FriendsFailureContainer",__source:{fileName:v,lineNumber:66}},s.createElement("div",{className:"friendsListInsetShadowCtn",__source:{fileName:v,lineNumber:67}},s.createElement("div",{className:"frienListInsetShadowTop",__source:{fileName:v,lineNumber:68}})),e==N.b.SignIn&&s.createElement(r,{__source:{fileName:v,lineNumber:71}}),e==N.b.Loading&&s.createElement(n,{__source:{fileName:v,lineNumber:72}}),e==N.b.FailRetry&&s.createElement(a,{__source:{fileName:v,lineNumber:73}}))),s.createElement(f.a,{popup:this.props.popup.window,__source:{fileName:v,lineNumber:77}})))},o.c([m.observable],t.prototype,"m_strPersonaName",void 0),o.c([m.observable],t.prototype,"m_strAvatarSource",void 0),o.c([_.a],t.prototype,"ContextMenu",null),t=o.c([u.observer],t)}(s.Component),S=function(e){function t(t){var i=this,n={dimensions:{width:300,height:650},minWidth:226,minHeight:400,title:Object(p.b)("#WindowTitle_FriendsList"),html_class:"client_chat_frame fullheight SavedDimensionsPopup",body_class:"fullheight",target_browser:void 0,eCreationFlags:d.c.Resizable};return i=e.call(this,"offlinefriendslist","PopupFriendsListDimensions",n,!1)||this,i.m_offlineStore=t,i}return o.d(t,e),t.prototype.GetSavedDimensionsKey=function(){return this.m_strSavedDimensionsKey},t.prototype.Render=function(e,t){t.setAttribute("class","fullheight popup_chat_frame"),l.render(s.createElement(g,{popup:this,offlineStore:this.m_offlineStore,__source:{fileName:v,lineNumber:183}}),t)},t.prototype.OnClose=function(){e.prototype.OnClose.call(this)},t}(d.b)},afSG:function(e,t,i){"use strict";function n(e){return SteamClient.WebChat.RegisterForFriendPostMessage(p),void 0!==z&&(clearInterval(z),z=void 0),y=e,E.SetLoadingState(C.b.Loading),T=0,a(),W?(E.SetLoadingState(C.b.FailRetry),void f()):I?void f():(x=setTimeout(l,4e3),L=setTimeout(s,1e3),void SteamClient.WebChat.GetWebChatURL().then(function(e){console.log("Loading chat from url: ",e),w=e,void 0!==L&&(clearTimeout(L),L=void 0),r(e)}))}function a(){void 0!==L&&(clearTimeout(L),L=void 0),void 0!==x&&(clearTimeout(x),x=void 0)}function r(e){console.log("Checking network... "+O);var t=7500;0==O?t=500:1==O&&(t=2e3);var i=e;++O,g.a.head(e,{timeout:t}).then(function(e){void 0===e.headers["x-buildtimestamp"]&&console.log("Network check (head req) got 200, but no x-buildtimestamp, not valid? Proceeding anyway..."),console.log("Network check (head req) passed after "+O+" tries..."),o(i)}).catch(function(e){console.log("Network check try "+O+" failed..."),O>=3?s():r(i)})}function o(e){console.log("Loading chat from url: ",e),void 0!==L&&clearTimeout(L),L=setTimeout(s,15e3),document.getElementById(y).src=e}function s(){console.log("Failed to load chat!"),a(),E.SetLoadingState(C.b.FailRetry),f()}function l(){E.loadingState!=C.b.Loaded&&f(),x=void 0}function c(){var e=document.getElementById(y);e&&void 0!=e.src&&(e.src=void 0),SteamClient.WebChat.RegisterForFriendPostMessage(p)}function m(e){if("object"==typeof e.data&&void 0!=e.data.message)if("ShowFriendsErrorRetryDialog"==e.data.message)a(),c(),E.SetLoadingState(C.b.FailRetry),f();else if("ChatJavascriptInitialized"==e.data.message){if(E.SetLoadingState(C.b.Loaded),a(),T=void 0!==e.data.data?e.data.data:0,void 0!=R)try{var t=w.match(/(https:\/\/[^\/]+)\/.*/)[1];window.frames[0].postMessage({message:"ReloadSerializedChatState",state:R},t),R=void 0}catch(e){console.log("Failed trying to ask FriendsUI to restore chat state after reload"),R=void 0}z=setInterval(u,1e3*k),_(),console.log("Chat loaded! "+T)}else if(void 0!=e.data.message&&"ChatReloadRequest"==e.data.message){if(void 0==y||""==y)return;O=0,_(),void 0!=e.data.state&&(R=e.data.state),n(y)}else"CheckForAndForceUpdate"==e.data.message?d(!0):void 0!=e.data.message&&"SignInRequest"==e.data.message?(O=0,n("tracked_frame_friends_chat")):void 0!=e.data.message&&"SignOutRequest"==e.data.message&&(a(),c(),E.SetLoadingState(C.b.SignIn),f())}function u(){d(!1)}function d(e){SteamClient.WebChat.GetWebChatURL().then(function(t){console.log("Checking for updates from chat from url: ",t),void 0!==L&&(clearTimeout(L),L=void 0),g.a.head(t,{timeout:1e4}).then(function(i){if(void 0!==i.headers["x-buildtimestamp"]){M=Number(i.headers["x-buildtimestamp"]),console.log("Currently available build: "+M);var n=86400;if(e&&(n=0),0!=M&&0!=T){var a=M-T;if(E.loadingState==C.b.Loaded&&a>n){var r=a>604800,o=Number(i.headers["x-forceuiupdate"])||e;console.log("We are out of date enough to reload if idle, bVeryOutOfDate="+(r?"true":"false"));var s=t.match(/(https:\/\/[^\/]+)\/.*/)[1];window.frames[0].postMessage({message:"UpdatedBuildAvailable",bVeryOutOfDate:r,bForce:o,nSecondsOutOfDate:a},s)}}}}).catch(function(e){console.log("Failed trying to check available build timestamp")})})}function p(e){var t=e.data;t&&t.command&&"ShowPopupFriendsList"==t.command&&(console.log("ShowPopupFriendsList"),f())}function f(){F||(F=new N.a(E)),F.Show()}function _(){void 0!=F&&(console.log("Closing offline dialog"),F.Close(),F=void 0)}function b(){return h.b(this,void 0,void 0,function(){var e,t,i;return h.e(this,function(a){switch(a.label){case 0:return E=new C.a,E.Init(),[4,SteamClient.WebChat.GetWebChatLanguage()];case 1:e=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,Object(S.a)(e)];case 3:return a.sent(),[3,5];case 4:return t=a.sent(),console.log("Failed to load localization!"),[3,5];case 5:return SteamClient.WebChat.RegisterForFriendPostMessage(p),[4,SteamClient.WebChat.GetSignIntoFriendsOnStart()];case 6:return(i=a.sent())?(n("tracked_frame_friends_chat"),[2]):(console.log("Don't sign in on start"),E.SetLoadingState(C.b.SignIn),[2])}})})}Object.defineProperty(t,"__esModule",{value:!0});var h=i("TToO"),N=i("KxOm"),v=i("mtWM"),g=i.n(v),S=i("9YjS"),C=i("3v0/");window._Steam={onComponentMounted:S.c},window.test=S.b;var E,y="",w="",L=void 0,x=void 0,z=void 0,O=0,F=void 0,T=0,M=0,R=void 0,k=14400,W=!1,I=!1;window.addEventListener("message",m),document.addEventListener("DOMContentLoaded",function(){return b()})},ccMP:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var n=i("TToO"),a=i("GiK3"),r=(i.n(a),function(e){function t(t){var i=e.call(this,t)||this;return i.m_fnExistingPopupInitializer=void 0,i.BindResizeGrip=i.BindResizeGrip.bind(i),i}return n.d(t,e),t.prototype.BindResizeGrip=function(e){var t=0,i=0;if(e){var n=e.getBoundingClientRect(),a=e.ownerDocument.defaultView;n&&a&&(t=Math.ceil(a.innerWidth-n.left),i=Math.ceil(a.innerHeight-n.top))}var r=this.props.popup;r.SteamClient&&r.SteamClient.Window&&r.SteamClient.Window.SetResizeGrip&&r.SteamClient.Window.SetResizeGrip(t,i)},t.prototype.componentWillUnmount=function(){this.props.popup.SteamClient.Window.SetResizeGrip(0,0)},t.prototype.render=function(){return a.createElement("div",{className:"window_resize_grip",ref:this.BindResizeGrip,__source:{fileName:"c:\\buildslave\\steam_webpack_rel_client_win32\\build\\src\\clientui\\shared\\js\\ui\\windowresizegrip.tsx",lineNumber:33}})},t}(a.PureComponent))},sgqT:function(e,t,i){"use strict";i.d(t,"a",function(){return s});var n=i("TToO"),a=i("GiK3"),r=(i.n(a),i("5Pz3")),o="c:\\buildslave\\steam_webpack_rel_client_win32\\build\\src\\clientui\\shared\\js\\ui\\throbber.tsx",s=function(e){function t(t){return e.call(this,t)||this}return n.d(t,e),t.prototype.AddSizeClass=function(e){"small"==this.props.size?e.push("throbber_small"):"medium"==this.props.size?e.push("throbber_medium"):e.push("throbber_large")},t.prototype.render=function(){var e=["LoadingWrapper SteamLogoThrobber"];this.AddSizeClass(e),void 0===this.props.string&&e.push("noString"),this.props.className&&e.push(this.props.className);var t=a.createElement("div",{className:e.join(" "),__source:{fileName:o,lineNumber:25}},a.createElement("div",{className:"Throbber",__source:{fileName:o,lineNumber:26}},a.createElement(r.h,{className:"base",__source:{fileName:o,lineNumber:27}}),a.createElement(r.h,{className:"blur",__source:{fileName:o,lineNumber:28}})),a.createElement("div",{className:"ThrobberText",__source:{fileName:o,lineNumber:30}},this.props.string));return"center"==this.props.position&&(t=a.createElement("div",{className:"throbber_center_wrapper",__source:{fileName:o,lineNumber:34}},t)),t},t}(a.PureComponent)}});
//# sourceMappingURL=clientui_friends.js.map